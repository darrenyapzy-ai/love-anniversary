<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘ä»¬çš„çˆ± - ä¸€å‘¨å¹´çºªå¿µ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        .font-hand { font-family: 'Ma Shan Zheng', cursive; }
        .font-serif { font-family: 'Noto Serif SC', serif; }

        .page-section {
            display: none;
            animation: fadeIn 0.8s ease-in-out;
        }
        .page-section.active { display: block; }

        #entrance { background: linear-gradient(135deg, #fff0f5 0%, #fff 100%); }

        /* --- æ”¾å¤§ç‰ˆä¿¡å°æ ·å¼ --- */
        .envelope-container {
            position: relative;
            cursor: pointer;
            transition: transform 0.3s;
            width: 360px;
            height: 240px;
            margin: 0 auto;
        }
        .envelope-container:hover { transform: scale(1.05); }

        .envelope {
            width: 360px;
            height: 240px;
            background-color: #ffc1cc;
            position: relative;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(255, 182, 193, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .envelope::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: 180px solid transparent; 
            border-right: 180px solid transparent;
            border-top: 130px solid #ffb7c5; 
            transform-origin: top;
            transition: transform 0.5s;
            z-index: 20;
        }

        .envelope-container:hover .envelope::before { transform: rotateX(180deg); }

        .wax-seal {
            width: 60px; 
            height: 60px;
            background-color: #ef4444;
            border-radius: 50%;
            position: absolute;
            top: -30px; 
            left: 50%;
            transform: translateX(-50%);
            z-index: 30;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border: 2px solid #fee2e2;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hearts-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0; overflow: hidden;
        }
        .heart {
            position: absolute; bottom: -100px; width: 20px; height: 20px;
            background: rgba(255, 182, 193, 0.6);
            transform: rotate(45deg);
            animation: floatHeart 6s linear infinite;
        }
        .heart::before, .heart::after {
            content: ''; position: absolute; width: 20px; height: 20px;
            background: rgba(255, 182, 193, 0.6); border-radius: 50%;
        }
        .heart::before { top: -10px; left: 0; }
        .heart::after { left: -10px; top: 0; }

        @keyframes floatHeart {
            0% { transform: translateY(0) rotate(45deg) scale(0.8); opacity: 0; }
            20% { opacity: 0.8; }
            100% { transform: translateY(-100vh) rotate(45deg) scale(1.2); opacity: 0; }
        }

        .spin-slow { animation: spin 4s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .reveal { opacity: 0; transform: translateY(30px); transition: all 1s ease; }
        .reveal.active { opacity: 1; transform: translateY(0); }

        .photo-card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .photo-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
        
        #reasonDisplay, #promiseDisplay { transition: opacity 0.3s ease; }
        
        .coupon-card {
            background: linear-gradient(135deg, #fff5f5 0%, #fff 100%);
            border: 2px dashed #fc8181;
            position: relative; overflow: hidden;
            transition: all 0.3s ease;
        }
        .coupon-card::before, .coupon-card::after {
            content: ''; position: absolute; width: 20px; height: 20px;
            background-color: #fef2f2; border-radius: 50%; top: 50%;
            transform: translateY(-50%);
        }
        .coupon-card::before { left: -10px; }
        .coupon-card::after { right: -10px; }

        /* å·²ä½¿ç”¨çŠ¶æ€æ ·å¼ */
        .coupon-card.used {
            filter: grayscale(100%);
            opacity: 0.7;
            background: #f3f4f6;
            border-color: #d1d5db;
        }
        .coupon-card.used::before, .coupon-card.used::after {
            background-color: #fef2f2; /* ä¿æŒèƒŒæ™¯è‰²ä¸€è‡´ï¼Œé¿å…åœ†å­”çªå…€ */
        }
        
        /* å°ç« æ ·å¼ */
        .stamp {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-15deg);
            border: 3px solid #ef4444;
            color: #ef4444;
            font-size: 2rem;
            font-weight: bold;
            padding: 5px 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.8;
            pointer-events: none;
            z-index: 10;
            border-radius: 8px;
            box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2);
        }
        .coupon-card.used .stamp {
            display: block;
            animation: stampIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes stampIn {
            0% { transform: translate(-50%, -50%) scale(2) rotate(-15deg); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1) rotate(-15deg); opacity: 0.8; }
        }

        body {
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="%23ff6b6b"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>'), auto;
        }
    </style>
</head>
<body class="bg-red-50 text-gray-800 font-serif overflow-x-hidden min-h-screen">

    <div class="hearts-bg hidden" id="heartsContainer"></div>

    <div id="musicControl" class="fixed top-4 right-4 z-50 hidden opacity-0 transition-opacity duration-1000">
        <button id="musicBtn" class="w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center text-red-500 hover:bg-red-100 transition duration-300">
            <i class="fas fa-music"></i>
        </button>
        <audio id="bgMusic" loop preload="auto">
            <source src="music.mp3" type="audio/mpeg">
        </audio>
    </div>

    <nav id="navBar" class="fixed top-0 left-0 w-full z-40 bg-white/80 backdrop-blur-md shadow-sm py-3 px-6 hidden transition-all duration-300">
        <button onclick="navigateTo('home')" class="text-red-500 font-hand text-xl hover:text-red-700 flex items-center gap-2">
            <i class="fas fa-arrow-left"></i> è¿”å›ä¸»é¡µ
        </button>
    </nav>

    <!-- ================= é¡µé¢ 0: ä»ªå¼æ„Ÿå…¥å£ (Entrance) ================= -->
    <div id="entrance" class="page-section active h-screen flex flex-col items-center justify-center relative overflow-hidden" onclick="enterWorld()">
        <div class="absolute w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"></div>
        
        <div class="z-10 flex flex-col items-center justify-center relative group w-full mt-20">
            <h1 class="font-hand text-red-400 text-5xl mb-16 tracking-widest animate-pulse">To My Love</h1>
            
            <div class="envelope-container">
                <div class="envelope">
                    <div class="wax-seal">
                        <i class="fas fa-heart text-white text-2xl"></i>
                    </div>
                    <span class="font-serif text-white text-xl tracking-widest">Click to Open</span>
                </div>
            </div>

            <p class="text-red-300 font-serif text-base mt-16 tracking-[0.2em] uppercase opacity-70">Tap envelope to start</p>
        </div>
        
        <div class="absolute bottom-10 text-red-200 text-xs font-serif">
            Â© 2025 Our Story
        </div>
    </div>


    <!-- ================= é¡µé¢ 1: ä¸»é¡µ (Home) ================= -->
    <div id="home" class="page-section">
        
        <section class="min-h-screen flex flex-col items-center justify-center relative px-4 text-center">
            <div class="absolute inset-0 z-[-1]">
                <img src="https://images.unsplash.com/photo-1518199266791-5375a83190b7?q=80&w=2070&auto=format&fit=crop" class="w-full h-full object-cover opacity-20" alt="Background">
                <div class="absolute inset-0 bg-gradient-to-b from-transparent via-red-50/50 to-red-50"></div>
            </div>

            <h1 class="font-hand text-5xl md:text-7xl text-red-600 mb-4 animate__animated animate__fadeInDown">æˆ‘ä»¬åœ¨ä¸€èµ·äº†</h1>
            <p class="text-xl md:text-2xl text-gray-600 mb-8 tracking-widest">Since 2025.04.14</p>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl w-full">
                <div class="bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-xl transform hover:scale-105 transition duration-300">
                    <span id="days" class="block text-4xl md:text-6xl font-bold text-red-500">0</span>
                    <span class="text-gray-500 text-sm md:text-base">å¤© (Days)</span>
                </div>
                <div class="bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-xl transform hover:scale-105 transition duration-300">
                    <span id="hours" class="block text-4xl md:text-6xl font-bold text-red-500">0</span>
                    <span class="text-gray-500 text-sm md:text-base">æ—¶ (Hours)</span>
                </div>
                <div class="bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-xl transform hover:scale-105 transition duration-300">
                    <span id="minutes" class="block text-4xl md:text-6xl font-bold text-red-500">0</span>
                    <span class="text-gray-500 text-sm md:text-base">åˆ† (Minutes)</span>
                </div>
                <div class="bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-xl transform hover:scale-105 transition duration-300">
                    <span id="seconds" class="block text-4xl md:text-6xl font-bold text-red-500">0</span>
                    <span class="text-gray-500 text-sm md:text-base">ç§’ (Seconds)</span>
                </div>
            </div>

            <button onclick="triggerConfetti()" class="mt-12 px-8 py-3 bg-red-500 text-white rounded-full hover:bg-red-600 transition shadow-lg font-hand text-xl animate-bounce">
                ç‚¹æˆ‘åº†ç¥ â¤ï¸
            </button>
        </section>

        <section class="py-20 px-4 max-w-4xl mx-auto">
            <h2 class="text-center font-hand text-4xl text-red-800 mb-16 reveal">æˆ‘ä»¬çš„æ•…äº‹</h2>
            <div class="relative border-l-4 border-red-200 ml-4 md:ml-0 space-y-12">
                <div class="relative pl-8 md:pl-0 reveal">
                    <div class="absolute -left-[10px] top-0 w-6 h-6 bg-red-500 rounded-full border-4 border-white shadow"></div>
                    <div class="md:flex md:justify-between items-center group">
                        <div class="md:w-[45%] md:text-right md:pr-8 mb-2 md:mb-0">
                            <span class="inline-block px-3 py-1 bg-red-100 text-red-600 rounded-full text-sm font-bold">2023.01.01</span>
                        </div>
                        <div class="md:w-[45%] md:pl-8 bg-white p-6 rounded-xl shadow-md photo-card">
                            <h3 class="font-bold text-xl mb-2">ç¬¬ä¸€æ¬¡ç‰µæ‰‹</h3>
                            <p class="text-gray-600">é‚£æ—¶å€™ä½ é—®æˆ‘ä¸ºä»€ä¹ˆè¦æŠ“é‚£ä¹ˆç´§ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡ç‰µæ‰‹æ‰€ä»¥æ€•æ”¾æ‰‹äº†å°±ç‰µä¸åˆ°äº†</p>
                        </div>
                    </div>
                </div>
                <div class="relative pl-8 md:pl-0 reveal">
                    <div class="absolute -left-[10px] top-0 w-6 h-6 bg-red-400 rounded-full border-4 border-white shadow"></div>
                    <div class="md:flex md:justify-between items-center flex-row-reverse group">
                        <div class="md:w-[45%] md:text-left md:pl-8 mb-2 md:mb-0">
                            <span class="inline-block px-3 py-1 bg-red-100 text-red-600 rounded-full text-sm font-bold">2023.02.14</span>
                        </div>
                        <div class="md:w-[45%] md:pr-8 md:text-right">
                            <div class="bg-white p-6 rounded-xl shadow-md photo-card inline-block text-left">
                                <h3 class="font-bold text-xl mb-2">ç¬¬ä¸€æ¬¡å‘Šç™½</h3>
                                <p class="text-gray-600">æˆ‘è¿˜è®°å¾—é‚£æ—¶å€™é ä¸€ä¸ªDIYçš„é¡¹é“¾æ‰å‘Šç™½æˆåŠŸçš„ï¼Œè™½ç„¶ä¸æ˜¯ä»€ä¹ˆå¾ˆè´µé‡çš„ä¸œè¥¿ï¼Œä½†æ˜¯çœ‹åˆ°ä½ å¾ˆå¼€å¿ƒï¼Œæˆ‘ä¹Ÿè¶…çº§å¼€å¿ƒ</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="py-20 bg-white">
            <div class="max-w-6xl mx-auto px-4">
                <h2 class="text-center font-hand text-4xl text-red-800 mb-12 reveal">ç”œèœœç¬é—´</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="relative h-80 rounded-2xl overflow-hidden group reveal photo-card">
                        <img src="love1.jpeg" onerror="this.src='https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?q=80&w=1974&auto=format&fit=crop'" class="w-full h-full object-cover transition duration-500 group-hover:scale-110" alt="Sweet Moment 1">
                    </div>
                    <div class="relative h-80 rounded-2xl overflow-hidden group reveal photo-card">
                        <img src="love2.jpeg" onerror="this.src='https://images.unsplash.com/photo-1621091211034-53136cc1eb32?q=80&w=1974&auto=format&fit=crop'" class="w-full h-full object-cover transition duration-500 group-hover:scale-110" alt="Sweet Moment 2">
                    </div>
                    <div class="relative h-80 rounded-2xl overflow-hidden group reveal photo-card">
                        <img src="love3.jpeg" onerror="this.src='https://images.unsplash.com/photo-1516054575922-f0b8eeadec1a?q=80&w=1974&auto=format&fit=crop'" class="w-full h-full object-cover transition duration-500 group-hover:scale-110" alt="Sweet Moment 3">
                    </div>
                </div>
            </div>
        </section>

        <!-- çˆ±ä½ çš„ç†ç”± -->
        <section class="py-20 bg-red-50">
            <div class="max-w-4xl mx-auto px-4 text-center">
                <h2 class="text-center font-hand text-4xl text-red-800 mb-12 reveal">çˆ±ä½ çš„ç†ç”±</h2>
                <div class="bg-white p-10 rounded-3xl shadow-xl relative transform transition duration-500 hover:scale-[1.02] border-2 border-red-100 reveal">
                    <i class="fas fa-quote-left text-5xl text-red-100 absolute top-6 left-6"></i>
                    <div class="min-h-[120px] flex items-center justify-center py-6 px-8">
                        <p id="reasonDisplay" class="font-serif text-2xl md:text-3xl text-gray-700 leading-relaxed">
                            ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼ŒæŠ½å–æˆ‘å¯¹ä½ çš„çˆ±æ„ â¤ï¸
                        </p>
                    </div>
                    <i class="fas fa-quote-right text-5xl text-red-100 absolute bottom-6 right-6"></i>
                </div>
                <button onclick="displayNextReason()" class="mt-10 px-10 py-4 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-full hover:from-red-600 hover:to-pink-600 transition shadow-lg font-hand text-2xl animate-pulse">
                    éšæœºæŠ½å–ä¸€æ¡ç†ç”±
                </button>
            </div>
        </section>

        <!-- æœªæ¥çº¦å®šæŠ½å¡ -->
        <section class="py-20 bg-indigo-50 relative overflow-hidden">
            <!-- è£…é¥°èƒŒæ™¯ -->
            <div class="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none">
                <div class="absolute top-10 left-10 text-6xl text-indigo-300 transform -rotate-12"><i class="fas fa-plane"></i></div>
                <div class="absolute bottom-20 right-20 text-6xl text-purple-300 transform rotate-12"><i class="fas fa-camera-retro"></i></div>
            </div>

            <div class="max-w-4xl mx-auto px-4 text-center relative z-10">
                <h2 class="text-center font-hand text-4xl text-indigo-800 mb-12 reveal">æœªæ¥çš„çº¦å®š</h2>
                <div class="bg-white p-10 rounded-3xl shadow-xl relative transform transition duration-500 hover:scale-[1.02] border-2 border-indigo-100 reveal">
                    <i class="fas fa-star text-4xl text-indigo-200 absolute top-6 left-6 animate-pulse"></i>
                    <i class="fas fa-moon text-4xl text-purple-200 absolute bottom-6 right-6"></i>
                    
                    <div class="min-h-[120px] flex items-center justify-center py-6 px-8">
                        <p id="promiseDisplay" class="font-serif text-2xl md:text-3xl text-gray-800 leading-relaxed font-bold">
                            æˆ‘ä»¬çš„æœªæ¥ä¼šå»å“ªé‡Œï¼Ÿç‚¹å‡»æŠ½å– ğŸ‘‡
                        </p>
                    </div>
                </div>
                <button onclick="displayNextPromise()" class="mt-10 px-10 py-4 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-full hover:from-indigo-600 hover:to-purple-600 transition shadow-lg font-hand text-2xl hover:shadow-indigo-300/50">
                    âœ¨ è®¸ä¸‹ä¸€ä¸ªæœªæ¥çº¦å®š
                </button>
            </div>
        </section>

        <section class="py-20 px-4">
            <div class="max-w-2xl mx-auto bg-white p-8 md:p-12 rounded-lg shadow-2xl border border-red-100 relative reveal">
                <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 w-4 h-4 rounded-full bg-red-400 border-2 border-white shadow-md"></div>
                <h2 class="font-hand text-3xl text-center mb-8 text-gray-800">ç»™æœ€äº²çˆ±çš„ä½ </h2>
                <div class="font-serif text-lg leading-loose text-gray-700 min-h-[200px]" id="typewriter"></div>
                <div class="text-right mt-8 font-hand text-xl text-red-500">â€”â€” æ°¸è¿œçˆ±ä½ çš„æˆ‘</div>
            </div>
        </section>

        <section class="py-20 bg-white">
            <div class="max-w-5xl mx-auto px-4">
                <h2 class="text-center font-hand text-4xl text-red-800 mb-12">æ›´å¤šæƒŠå–œ</h2>
                <!-- ä¿®æ”¹ grid ä¸º 3 åˆ— -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- æ‹çˆ±å…‘æ¢åˆ¸ -->
                    <div onclick="navigateTo('coupons')" class="cursor-pointer group relative overflow-hidden rounded-2xl shadow-lg h-64 bg-gradient-to-br from-pink-100 to-red-100 flex flex-col items-center justify-center text-center transition-transform hover:-translate-y-2">
                        <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-20 transition duration-300"></div>
                        <i class="fas fa-ticket-alt text-6xl text-red-400 mb-4 group-hover:scale-110 transition duration-300"></i>
                        <h3 class="font-hand text-3xl text-gray-800">æ‹çˆ±å…‘æ¢åˆ¸</h3>
                        <p class="mt-2 text-gray-600">ä¸“å±ç‰¹æƒï¼Œç‚¹å‡»é¢†å–</p>
                    </div>

                    <!-- æˆ‘ä»¬çš„è¶³è¿¹ -->
                    <div onclick="navigateTo('footprints')" class="cursor-pointer group relative overflow-hidden rounded-2xl shadow-lg h-64 bg-gradient-to-br from-blue-100 to-indigo-100 flex flex-col items-center justify-center text-center transition-transform hover:-translate-y-2">
                        <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-20 transition duration-300"></div>
                        <i class="fas fa-map-marked-alt text-6xl text-indigo-400 mb-4 group-hover:scale-110 transition duration-300"></i>
                        <h3 class="font-hand text-3xl text-gray-800">æˆ‘ä»¬çš„è¶³è¿¹</h3>
                        <p class="mt-2 text-gray-600">å»è¿‡çš„æ¯ä¸€ä¸ªåœ°æ–¹</p>
                    </div>

                    <!-- æ–°å¢ï¼šé»˜å¥‘æŒ‘æˆ˜ (è·³è½¬æ–°ç½‘é¡µ) -->
                    <a href="love_quiz.html" class="block cursor-pointer group relative overflow-hidden rounded-2xl shadow-lg h-64 bg-gradient-to-br from-yellow-100 to-orange-100 flex flex-col items-center justify-center text-center transition-transform hover:-translate-y-2">
                        <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-20 transition duration-300"></div>
                        <i class="fas fa-puzzle-piece text-6xl text-orange-400 mb-4 group-hover:scale-110 transition duration-300"></i>
                        <h3 class="font-hand text-3xl text-gray-800">é»˜å¥‘å¤§è€ƒéªŒ</h3>
                        <p class="mt-2 text-gray-600">çœ‹çœ‹æˆ‘ä»¬æœ‰å¤šæ‡‚å½¼æ­¤ï¼Ÿ</p>
                    </a>
                </div>
            </div>
        </section>

        <footer class="py-6 text-center text-gray-400 text-sm bg-gray-50">
            <p>Created with â¤ï¸ for Our Anniversary</p>
        </footer>
    </div>

    <!-- å…‘æ¢åˆ¸é¡µé¢ -->
    <div id="coupons" class="page-section min-h-screen bg-red-50 py-20 px-4">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-center font-hand text-5xl text-red-800 mb-4">æ‹çˆ±ç‰¹æƒåˆ¸</h2>
            <p class="text-center text-gray-500 mb-12">è°¨æ…ä½¿ç”¨ï¼Œæ¯ä¸€å¼ éƒ½ä»£è¡¨æˆ‘å¯¹ä½ çš„æ‰¿è¯º â¤ï¸</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="couponList">
                
                <!-- æŒ‰æ‘©åˆ¸ -->
                <div id="coupon-massage" class="coupon-card bg-white p-6 rounded-lg flex items-center justify-between shadow-md hover:shadow-xl transition relative group">
                    <div class="stamp">å·²æ ¸é”€ CERTIFIED</div>
                    <div class="flex-1">
                        <h3 class="font-bold text-2xl text-red-500 mb-2">æŒ‰æ‘©åˆ¸</h3>
                        <p class="text-gray-500 text-sm">å‡­æ­¤åˆ¸å¯äº«å—å…¨å¥—æŒ‰æ‘©æœåŠ¡30åˆ†é’Ÿ</p>
                        <p class="text-xs text-gray-400 mt-2"><i class="fas fa-history mr-1"></i>æœ¬å¹´åº¦é™ç”¨ 1 æ¬¡</p>
                    </div>
                    <div class="border-l-2 border-dashed border-red-200 pl-4 flex flex-col items-center justify-center">
                        <i class="fas fa-hand-sparkles text-3xl text-red-300 mb-2 group-hover:text-red-500 transition"></i>
                        <button onclick="tryRedeem('massage', 'æŒ‰æ‘©åˆ¸')" class="coupon-btn px-4 py-1 bg-red-500 text-white text-xs rounded-full hover:bg-red-600 transition shadow-md">ç‚¹å‡»ä½¿ç”¨</button>
                    </div>
                </div>

                <!-- æ¶ˆæ°”åˆ¸ -->
                <div id="coupon-forgive" class="coupon-card bg-white p-6 rounded-lg flex items-center justify-between shadow-md hover:shadow-xl transition relative group">
                    <div class="stamp">å·²æ ¸é”€ CERTIFIED</div>
                    <div class="flex-1">
                        <h3 class="font-bold text-2xl text-red-500 mb-2">æ¶ˆæ°”åˆ¸</h3>
                        <p class="text-gray-500 text-sm">åµæ¶æ—¶å‡ºç¤ºï¼Œæ— æ¡ä»¶å’Œå¥½ï¼Œä¸èƒ½ç”Ÿæ°”</p>
                        <p class="text-xs text-gray-400 mt-2"><i class="fas fa-history mr-1"></i>çæƒœä½¿ç”¨ï¼Œä»…é™ 1 å¼ </p>
                    </div>
                    <div class="border-l-2 border-dashed border-red-200 pl-4 flex flex-col items-center justify-center">
                        <i class="fas fa-smile-beam text-3xl text-red-300 mb-2 group-hover:text-red-500 transition"></i>
                        <button onclick="tryRedeem('forgive', 'æ¶ˆæ°”åˆ¸')" class="coupon-btn px-4 py-1 bg-red-500 text-white text-xs rounded-full hover:bg-red-600 transition shadow-md">ç‚¹å‡»ä½¿ç”¨</button>
                    </div>
                </div>

                <!-- æ¸…ç©ºè´­ç‰©è½¦ -->
                <div id="coupon-cart" class="coupon-card bg-white p-6 rounded-lg flex items-center justify-between shadow-md hover:shadow-xl transition relative group">
                    <div class="stamp">å·²æ ¸é”€ CERTIFIED</div>
                    <div class="flex-1">
                        <h3 class="font-bold text-2xl text-red-500 mb-2">æ¸…ç©ºè´­ç‰©è½¦</h3>
                        <p class="text-gray-500 text-sm">é¢„ç®—èŒƒå›´å†…ï¼Œä¹°ä½ å–œæ¬¢çš„ä¸€ä¸ªç¤¼ç‰©</p>
                        <p class="text-xs text-gray-400 mt-2"><i class="fas fa-history mr-1"></i>å¹´åº¦å¤§å¥–ï¼Œé™ 1 æ¬¡</p>
                    </div>
                    <div class="border-l-2 border-dashed border-red-200 pl-4 flex flex-col items-center justify-center">
                        <i class="fas fa-shopping-bag text-3xl text-red-300 mb-2 group-hover:text-red-500 transition"></i>
                        <button onclick="tryRedeem('cart', 'æ¸…ç©ºè´­ç‰©è½¦')" class="coupon-btn px-4 py-1 bg-red-500 text-white text-xs rounded-full hover:bg-red-600 transition shadow-md">ç‚¹å‡»ä½¿ç”¨</button>
                    </div>
                </div>

                <!-- å¤§é¤åˆ¸ -->
                <div id="coupon-food" class="coupon-card bg-white p-6 rounded-lg flex items-center justify-between shadow-md hover:shadow-xl transition relative group">
                    <div class="stamp">å·²æ ¸é”€ CERTIFIED</div>
                    <div class="flex-1">
                        <h3 class="font-bold text-2xl text-red-500 mb-2">å¤§é¤åˆ¸</h3>
                        <p class="text-gray-500 text-sm">æƒ³åƒä»€ä¹ˆéšä¾¿ç‚¹ï¼Œæˆ‘ä¹°å•/æˆ‘åšé¥­</p>
                        <p class="text-xs text-gray-400 mt-2"><i class="fas fa-history mr-1"></i>å­£åº¦é™ç”¨ 1 æ¬¡</p>
                    </div>
                    <div class="border-l-2 border-dashed border-red-200 pl-4 flex flex-col items-center justify-center">
                        <i class="fas fa-utensils text-3xl text-red-300 mb-2 group-hover:text-red-500 transition"></i>
                        <button onclick="tryRedeem('food', 'å¤§é¤åˆ¸')" class="coupon-btn px-4 py-1 bg-red-500 text-white text-xs rounded-full hover:bg-red-600 transition shadow-md">ç‚¹å‡»ä½¿ç”¨</button>
                    </div>
                </div>

            </div>
            
            <div class="text-center mt-12">
                <button onclick="navigateTo('home')" class="px-8 py-3 border-2 border-red-500 text-red-500 rounded-full hover:bg-red-500 hover:text-white transition">è¿”å›ä¸»é¡µ</button>
            </div>
        </div>
    </div>

    <div id="footprints" class="page-section min-h-screen bg-indigo-50 py-20 px-4">
        <div class="max-w-3xl mx-auto text-center">
            <h2 class="font-hand text-5xl text-indigo-800 mb-4">ä¸€èµ·èµ°è¿‡çš„è·¯</h2>
            <p class="text-gray-500 mb-12">ä¸–ç•Œå¾ˆå¤§ï¼Œå¹¸å¥½æœ‰ä½ é™ªæˆ‘çœ‹</p>
            
            <div class="space-y-6">
                <div class="bg-white p-6 rounded-xl shadow-lg flex items-center gap-4 transform hover:scale-105 transition">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center text-2xl">ğŸ®</div>
                    <div class="text-left">
                        <h3 class="font-bold text-xl text-gray-800">Melaka æœºåœºè¡—</h3>
                        <p class="text-gray-500">æ¼«æ­¥åœ¨Jonker Walkï¼Œçƒ­é—¹çš„å¤œå¸‚å’Œå¤è€çš„å»ºç­‘ï¼Œè¿˜æœ‰ä½ çš„ç¬‘è„¸ã€‚</p>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-lg flex items-center gap-4 transform hover:scale-105 transition">
                    <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center text-2xl">ğŸŒ…</div>
                    <div class="text-left">
                        <h3 class="font-bold text-xl text-gray-800">Port Dickson çœ‹æ—¥å‡º</h3>
                        <p class="text-gray-500">åœ¨æµ·è¾¹é™é™ç­‰å¾…ç¬¬ä¸€ç¼•é˜³å…‰ï¼Œé‚£ä¸€åˆ»ï¼Œæ—¶é—´ä»¿ä½›é™æ­¢äº†ã€‚</p>
                    </div>
                </div>
            </div>

            <div class="mt-12 p-8 bg-white/50 rounded-xl border-2 border-dashed border-indigo-200">
                <p class="font-hand text-2xl text-indigo-400">æœªå®Œå¾…ç»­... ä¸‹ä¸€ç«™å»å“ªé‡Œï¼Ÿ</p>
            </div>
            
            <div class="text-center mt-12">
                <button onclick="navigateTo('home')" class="px-8 py-3 border-2 border-indigo-500 text-indigo-500 rounded-full hover:bg-indigo-500 hover:text-white transition">è¿”å›ä¸»é¡µ</button>
            </div>
        </div>
    </div>

    <!-- ç¡®è®¤ä½¿ç”¨æ¨¡æ€æ¡† (Confirm Modal) -->
    <div id="confirmModal" class="fixed inset-0 z-[60] hidden flex items-center justify-center px-4">
        <!-- èƒŒæ™¯é®ç½© -->
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity opacity-0" id="modalBackdrop"></div>
        
        <!-- å¼¹çª—å†…å®¹ -->
        <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full relative transform scale-95 opacity-0 transition-all duration-300" id="modalContent">
            <div class="absolute -top-10 left-1/2 transform -translate-x-1/2 w-20 h-20 bg-white rounded-full p-2 flex items-center justify-center shadow-lg">
                <div class="w-full h-full bg-red-100 rounded-full flex items-center justify-center text-3xl text-red-500">
                    <i class="fas fa-heart-crack"></i>
                </div>
            </div>
            
            <h3 class="font-hand text-3xl text-center text-gray-800 mt-8 mb-2">çœŸçš„è¦ä½¿ç”¨å—ï¼Ÿ</h3>
            <p class="text-center text-gray-500 mb-6 font-serif leading-relaxed">
                è¿™æ˜¯ç»™ä½ çš„ä¸“å±ç‰¹æƒ<br>
                ä¸€æ—¦ä½¿ç”¨ï¼Œæˆ‘ä¼šç«‹åˆ»çŸ¥é“å¹¶å‡†å¤‡å…‘ç°<br>
                <span class="text-xs text-red-400 block mt-2">( æœ¬å¹´åº¦ä»…æ­¤ä¸€æ¬¡å“¦ )</span>
            </p>
            
            <div class="flex gap-4">
                <button onclick="closeModal()" class="flex-1 py-3 border border-gray-300 rounded-xl text-gray-600 hover:bg-gray-50 transition">å†æƒ³æƒ³</button>
                <button onclick="confirmRedeem()" class="flex-1 py-3 bg-red-500 text-white rounded-xl shadow-lg hover:bg-red-600 hover:shadow-red-500/30 transition transform hover:-translate-y-1">ç¡®è®¤ä½¿ç”¨</button>
            </div>
        </div>
    </div>

    <script>
        const musicBtn = document.getElementById('musicBtn');
        const bgMusic = document.getElementById('bgMusic');
        let isPlaying = false;

        function setLoadingState() {
            musicBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>'; 
            musicBtn.classList.remove('spin-slow');
        }
        function setPlayingState() {
            musicBtn.innerHTML = '<i class="fas fa-pause"></i>';
            musicBtn.classList.add('spin-slow');
            isPlaying = true;
        }
        function setPausedState() {
            musicBtn.innerHTML = '<i class="fas fa-music"></i>';
            musicBtn.classList.remove('spin-slow');
            isPlaying = false;
        }
        
        function handleMusicError(e) {
            console.error("Music Error Details:", bgMusic.error); 
            setPausedState();
        }

        window.addEventListener('load', () => {
            bgMusic.load();
            loadCouponsState(); // åŠ è½½å…‘æ¢åˆ¸çŠ¶æ€
        });

        bgMusic.addEventListener('waiting', () => { console.log("ç¼“å†²ä¸­..."); setLoadingState(); });
        bgMusic.addEventListener('playing', () => { console.log("æ’­æ”¾ä¸­"); setPlayingState(); });
        bgMusic.addEventListener('pause', () => { setPausedState(); });
        bgMusic.addEventListener('error', handleMusicError);

        musicBtn.addEventListener('click', () => {
            if (isPlaying) {
                bgMusic.pause();
            } else {
                setLoadingState();
                bgMusic.play().catch(e => {
                    console.log("æ’­æ”¾è¢«æ‹¦æˆªæˆ–å¤±è´¥:", e);
                    setPausedState();
                });
            }
        });

        function enterWorld() {
            document.getElementById('entrance').style.display = 'none';
            document.getElementById('home').classList.add('active');
            
            document.getElementById('musicControl').classList.remove('hidden');
            setTimeout(() => { document.getElementById('musicControl').classList.remove('opacity-0'); }, 100);
            document.getElementById('heartsContainer').classList.remove('hidden');

            setLoadingState();
            bgMusic.volume = 0.2; 
            
            bgMusic.play().then(() => {
                // Autoplay started
            }).catch(e => {
                console.log("è‡ªåŠ¨æ’­æ”¾è¢«æ‹¦æˆªï¼Œç­‰å¾…ç”¨æˆ·ç‚¹å‡»:", e);
                setPausedState(); 
            });

            triggerConfetti();
        }

        function navigateTo(pageId) {
            document.querySelectorAll('.page-section').forEach(el => { el.classList.remove('active'); });
            document.getElementById(pageId).classList.add('active');
            window.scrollTo(0, 0);
            const navBar = document.getElementById('navBar');
            if (pageId === 'home') navBar.classList.add('hidden');
            else navBar.classList.remove('hidden');
        }

        // --- å…‘æ¢åˆ¸é€»è¾‘ START ---
        let pendingCouponId = null;
        let pendingCouponName = null;

        // åŠ è½½å·²ä¿å­˜çš„çŠ¶æ€
        function loadCouponsState() {
            const coupons = ['massage', 'forgive', 'cart', 'food'];
            coupons.forEach(id => {
                const usedTime = localStorage.getItem('coupon_' + id);
                if (usedTime) {
                    markAsUsed(id, usedTime);
                }
            });
        }

        function markAsUsed(id, timeStr) {
            const card = document.getElementById('coupon-' + id);
            if (!card) return;
            
            card.classList.add('used');
            const btn = card.querySelector('button');
            btn.disabled = true;
            btn.innerHTML = `<i class="fas fa-check mr-1"></i>å·²äº ${timeStr} å…‘ç°`;
            btn.classList.remove('bg-red-500', 'hover:bg-red-600');
            btn.classList.add('bg-gray-400', 'cursor-not-allowed');
        }

        function tryRedeem(id, name) {
            pendingCouponId = id;
            pendingCouponName = name;
            
            const modal = document.getElementById('confirmModal');
            const backdrop = document.getElementById('modalBackdrop');
            const content = document.getElementById('modalContent');
            
            modal.classList.remove('hidden');
            // Small delay for CSS transition
            setTimeout(() => {
                backdrop.classList.remove('opacity-0');
                content.classList.remove('opacity-0', 'scale-95');
                content.classList.add('scale-100');
            }, 10);
        }

        function closeModal() {
            const modal = document.getElementById('confirmModal');
            const backdrop = document.getElementById('modalBackdrop');
            const content = document.getElementById('modalContent');
            
            backdrop.classList.add('opacity-0');
            content.classList.remove('scale-100');
            content.classList.add('opacity-0', 'scale-95');
            
            setTimeout(() => {
                modal.classList.add('hidden');
                pendingCouponId = null;
            }, 300);
        }

        function confirmRedeem() {
            if (!pendingCouponId) return;

            const now = new Date();
            const timeStr = `${now.getFullYear()}.${now.getMonth()+1}.${now.getDate()}`;
            
            // 1. ä¿å­˜çŠ¶æ€
            localStorage.setItem('coupon_' + pendingCouponId, timeStr);
            
            // 2. æ›´æ–°UI
            markAsUsed(pendingCouponId, timeStr);
            
            // 3. åº†ç¥åŠ¨ç”»
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#ef4444', '#f87171']
            });
            
            closeModal();
        }
        // --- å…‘æ¢åˆ¸é€»è¾‘ END ---


        // --- ç†ç”±åˆ—è¡¨ ---
        const reasons = [
            "å› ä¸ºä½ çš„ç¬‘å®¹æ¯”é˜³å…‰è¿˜ç¿çƒ‚",
            "å› ä¸ºä½ æ€»æ˜¯èƒ½åŒ…å®¹æˆ‘çš„å°è„¾æ°”",
            "å› ä¸ºä½ åšçš„èœå¤ªå¥½åƒäº†",
            "å› ä¸ºå’Œä½ åœ¨ä¸€èµ·ï¼Œå‘å‘†ä¹Ÿè§‰å¾—ç¾å¥½",
            "å› ä¸ºä½ è®°å¾—å…³äºæˆ‘çš„ä¸€åˆ‡å°ç»†èŠ‚",
            "å› ä¸ºä½ æ˜¯è¿™ä¸ªä¸–ç•Œä¸Šæœ€æ‡‚æˆ‘çš„äºº",
            "å› ä¸ºä½ çš„æ‹¥æŠ±æ€»æ˜¯é‚£ä¹ˆæ¸©æš–",
            "å› ä¸ºæˆ‘ä»¬æœ‰èŠä¸å®Œçš„è¯é¢˜",
            "å› ä¸ºæƒ³åˆ°æœªæ¥æœ‰ä½ ï¼Œæˆ‘å°±å……æ»¡äº†æœŸå¾…",
            "å› ä¸ºä½ æ€»æ˜¯æ”¯æŒæˆ‘çš„æ¯ä¸€ä¸ªå†³å®š",
            "å› ä¸ºä½ èº«ä¸Šçš„å‘³é“è®©æˆ‘è§‰å¾—å®‰å¿ƒ",
            "å› ä¸ºä½ è®©æˆ‘å˜æˆäº†æ›´å¥½çš„äºº",
            "å› ä¸ºä½ ä¼šåœ¨è¿‡é©¬è·¯æ—¶ä¸‹æ„è¯†ç‰µä½æˆ‘çš„æ‰‹",
            "å› ä¸ºä½ çœ‹ç€æˆ‘çš„æ—¶å€™ï¼Œçœ¼ç›é‡Œæœ‰æ˜Ÿæ˜Ÿ",
            "å› ä¸ºä½ çš„å£°éŸ³å¾ˆå¥½å¬ï¼Œç™¾å¬ä¸åŒ",
            "å› ä¸ºä½ æ— è®ºå¤šå¿™éƒ½ä¼šå›æˆ‘çš„æ¶ˆæ¯",
            "å› ä¸ºä½ å°±æ˜¯ä½ ï¼Œç‹¬ä¸€æ— äºŒçš„ä½ ",
            "å› ä¸ºä½ ç»™äº†æˆ‘ä»æœªæœ‰è¿‡çš„å®‰å…¨æ„Ÿ",
            "å› ä¸ºæˆ‘çˆ±ä½ ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±",
            "å› ä¸ºä½ ç¡è§‰çš„æ ·å­å¾ˆå¯çˆ±",
            "å› ä¸ºä½ åƒä¸œè¥¿çš„æ—¶å€™åƒå°ä»“é¼ ",
            "å› ä¸ºä½ æ€»æ˜¯æŠŠå¥½åƒçš„ç•™ç»™æˆ‘",
            "å› ä¸ºä½ ä¼šåœ¨æˆ‘éš¾è¿‡æ—¶é™é™é™ªç€æˆ‘",
            "å› ä¸ºä½ ä¸ºäº†æˆ‘ä»¬çš„æœªæ¥åœ¨åŠªåŠ›",
            "å› ä¸ºä½ å­é¡ºçˆ¶æ¯ï¼Œå¿ƒåœ°å–„è‰¯",
            "å› ä¸ºä½ å–œæ¬¢å°åŠ¨ç‰©ï¼Œå¾ˆæœ‰çˆ±å¿ƒ",
            "å› ä¸ºä½ çš„è¡£å“å¾ˆå¥½",
            "å› ä¸ºä½ å”±æ­Œå¾ˆå¥½å¬",
            "å› ä¸ºä½ æ€»æ˜¯èƒ½æ¥ä½æˆ‘çš„æ¢—",
            "å› ä¸ºå’Œä½ ä¸€èµ·çœ‹ç”µå½±æ˜¯æœ€æ£’çš„çº¦ä¼š",
            "å› ä¸ºä½ ä»æ¥ä¸åå•¬å¯¹æˆ‘çš„å¤¸å¥–",
            "å› ä¸ºä½ è®©æˆ‘è§‰å¾—æˆ‘æ˜¯ä¸–ç•Œä¸Šæœ€å¹¸ç¦çš„äºº",
            "å› ä¸ºæˆ‘ä»¬ä¸‰è§‚ä¸€è‡´",
            "å› ä¸ºä½ å°Šé‡æˆ‘çš„çˆ±å¥½",
            "å› ä¸ºä½ æ„¿æ„é™ªæˆ‘åšå¹¼ç¨šçš„äº‹æƒ…",
            "å› ä¸ºä½ æ€»æ˜¯æŠŠæˆ‘æ”¾åœ¨ç¬¬ä¸€ä½",
            "å› ä¸ºä½ çš„æ‰‹å¾ˆæš–å’Œ",
            "å› ä¸ºä½ ä¼šåœ¨ç¡å‰è·Ÿæˆ‘è¯´æ™šå®‰",
            "å› ä¸ºä½ ä¼šåœ¨é†’æ¥æ—¶ç¬¬ä¸€æ—¶é—´æ‰¾æˆ‘",
            "å› ä¸ºä½ çš„å¹½é»˜æ„Ÿæ€»æ˜¯èƒ½é€—ç¬‘æˆ‘",
            "å› ä¸ºä½ ç­”åº”æˆ‘çš„äº‹æƒ…éƒ½ä¼šåšåˆ°",
            "å› ä¸ºä½ æ„¿æ„å¬æˆ‘å‘ç‰¢éªš",
            "å› ä¸ºä½ æ€»æ˜¯èƒ½å‘ç°ç”Ÿæ´»ä¸­çš„å°ç¡®å¹¸",
            "å› ä¸ºä½ æ‹çš„ç…§ç‰‡å¾ˆå¥½çœ‹",
            "å› ä¸ºä½ æ„¿æ„æ•™æˆ‘æˆ‘ä¸æ‡‚çš„äº‹æƒ…",
            "å› ä¸ºä½ ä»ä¸å«Œå¼ƒæˆ‘ç¬¨",
            "å› ä¸ºä½ æ€»æ˜¯é¼“åŠ±æˆ‘å°è¯•æ–°äº‹ç‰©",
            "å› ä¸ºä½ è®°å¾—æ¯ä¸€ä¸ªçºªå¿µæ—¥",
            "å› ä¸ºä½ ä¼šç»™æˆ‘å‡†å¤‡æƒŠå–œ",
            "å› ä¸ºä½ å†™çš„ä¿¡/å¡ç‰‡å¾ˆæ„Ÿäºº",
            "å› ä¸ºä½ ä¸ºäº†æˆ‘æ”¹å˜äº†å¾ˆå¤š",
            "å› ä¸ºä½ è®©æˆ‘ç›¸ä¿¡çˆ±æƒ…",
            "å› ä¸ºä½ æ˜¯æˆ‘æœ€äº²å¯†çš„çˆ±äºº",
            "å› ä¸ºä½ æ˜¯æˆ‘çµé­‚çš„å¦ä¸€åŠ",
            "å› ä¸ºé‡è§ä½ èŠ±å…‰äº†æˆ‘æ‰€æœ‰çš„è¿æ°”",
            "å› ä¸ºä½ æ€»æ˜¯èƒ½è®©æˆ‘å†·é™ä¸‹æ¥",
            "å› ä¸ºä½ è®©æˆ‘è§‰å¾—äººé—´å€¼å¾—",
            "å› ä¸ºä½ å–œæ¬¢æˆ‘ä¸å®Œç¾çš„æ ·å­",
            "å› ä¸ºä½ è§è¿‡æˆ‘æœ€ä¸‘çš„æ ·å­ä¾ç„¶çˆ±æˆ‘",
            "å› ä¸ºä½ æ€»æ˜¯æŠ¤çŸ­ï¼Œç«™åœ¨æˆ‘è¿™è¾¹",
            "å› ä¸ºä½ å¾ˆæœ‰ä¸Šè¿›å¿ƒ",
            "å› ä¸ºä½ åšçš„æ—©é¤å¾ˆå¥½åƒ",
            "å› ä¸ºä½ æ€»æ˜¯è®©ç€æˆ‘",
            "å› ä¸ºä½ ä»æ¥ä¸å¤§å£°å¼æˆ‘",
            "å› ä¸ºä½ æ„¿æ„èŠ±æ—¶é—´é™ªæˆ‘",
            "å› ä¸ºä½ è®°å¾—æˆ‘å–œæ¬¢å–ä»€ä¹ˆå¥¶èŒ¶",
            "å› ä¸ºä½ æ€»æ˜¯èƒ½çœ‹ç©¿æˆ‘çš„é€å¼º",
            "å› ä¸ºä½ æ˜¯æˆ‘ç–²æƒ«ç”Ÿæ´»çš„è§£è¯",
            "å› ä¸ºä½ æ˜¯æˆ‘æƒ³å…±åº¦ä½™ç”Ÿçš„äºº",
            "å› ä¸ºä½ çš„çœ¼ç¥æ€»æ˜¯å……æ»¡çˆ±æ„",
            "å› ä¸ºä½ æ€»æ˜¯å¤¸æˆ‘å¥½çœ‹",
            "å› ä¸ºä½ è®©æˆ‘è‡ªä¿¡",
            "å› ä¸ºä½ è®©æˆ‘ä¸å†å­¤å•",
            "å› ä¸ºä½ æ˜¯æˆ‘ç”Ÿå‘½ä¸­çš„å…‰",
            "å› ä¸ºæˆ‘æƒ³å’Œä½ ä»é»‘å‘åˆ°ç™½å¤´",
            "å› ä¸ºè¿™è¾ˆå­ï¼Œä¸‹è¾ˆå­ï¼Œæˆ‘éƒ½æƒ³å’Œä½ åœ¨ä¸€èµ·",
            "å› ä¸ºæ¯å¤©å¤šçˆ±ä½ ä¸€ç‚¹"
        ];

        // --- æœªæ¥çº¦å®šåˆ—è¡¨ ---
        const futurePromises = [
            "æˆ‘ä»¬å°†ä¸€èµ·å»æ—¥æœ¬çœ‹æ¨±èŠ±ï¼Œå­¦ä¸€ä¸‹åŠ¨æ¼«é‡Œçš„æ ·å­",
            "æˆ‘ä»¬ä¼šä¸€èµ·å…»ä¸€åªå«åƒMochiä¸€æ ·å¥½çš„å°çŒ«ï¼Œç„¶åç»™å®ƒå–åMocha",
            "æˆ‘ä»¬å°†ä¸€èµ·å»è¿ªå£«å°¼çœ‹çƒŸèŠ±ï¼Œåœ¨åŸå ¡å‰æŠ±æŠ±",
            "æˆ‘ä»¬ä¼šä¸€èµ·æŠŠå®¶è£…ä¿®æˆæ¸©æš–åˆèˆ’æœçš„æ ·å­ï¼ˆè¿˜è¦æœ‰ç”µç«æˆ¿å“¦ï¼‰",
            "æˆ‘ä»¬å°†æ¯å¹´æ‹ä¸€å¼ åŒæ ·çš„åˆå½±ï¼Œç›´åˆ°ç™½å¤´å•è€",
            "æˆ‘ä»¬ä¼šä¸€èµ·å­¦ä¼šåšä¸€é“å¤æ‚çš„ç”œç‚¹",
            "æˆ‘ä»¬ä¼šç­‰åˆ°å…«åå²ï¼Œè¿˜è¦æ‰‹ç‰µæ‰‹å»å…¬å›­æ•£æ­¥",
            "æˆ‘ä»¬ä¼šåœ¨å±äºæˆ‘ä»¬çš„å°çªé‡Œï¼Œä¸€èµ·çªåœ¨æ²™å‘çœ‹æŠ•å½±ç”µå½±",
            "æˆ‘ä»¬å°†æ‰‹ç‰µæ‰‹æ¼«æ­¥åœ¨å¼‚å›½çš„è¡—å¤´ï¼Œå‡è£…æ˜¯å½“åœ°äºº",
            "æˆ‘ä»¬ä¼šä¸€èµ·åšä¸€æœ¬åªå±äºæˆ‘ä»¬çš„å›å¿†ç›¸å†Œ",
            "æˆ‘ä»¬ä¼šå­¦ä¼šåšå¯¹æ–¹æœ€çˆ±åƒçš„ä¸€é“èœ",
            "æˆ‘ä»¬å†é¢†å…»ä¸€åªæµæµªå°çŒ«ï¼Œç»™å®ƒä¸€ä¸ªæ¸©æš–çš„å®¶",
            "æˆ‘ä»¬ä¼šä¸€èµ·å»éœ²è¥ï¼Œæ•°å¤©ä¸Šçš„æ˜Ÿæ˜Ÿ",
            "æˆ‘ä»¬å°†å­˜é’±å»ä¸€æ¬¡å¤–å›½",
            "æˆ‘ä»¬ä¼šåœ¨æ¯ä¸ªç»“å©šçºªå¿µæ—¥éƒ½é‡æ¸©ä¸€æ¬¡ç¬¬ä¸€æ¬¡çº¦ä¼š",
            "æˆ‘ä»¬å°†ä¸€èµ·ç§ä¸€æ£µæ ‘ï¼Œçœ‹ç€å®ƒå’Œæˆ‘ä»¬çš„çˆ±æƒ…ä¸€èµ·é•¿å¤§",
            "æˆ‘ä»¬å°†ä¸€èµ·é€›ikeaï¼Œä¸ºå®¶é‡Œæ·»ç½®å¯çˆ±çš„å°ç‰©ä»¶",
            "æˆ‘ä»¬ä¼šä¸€èµ·å»æ»‘é›ªï¼Œåœ¨é›ªåœ°é‡Œæ‰“æ»š",
            "æˆ‘ä»¬å°†ä¸€èµ·çœ‹éä¸–é—´æ‰€æœ‰çš„æ—¥å‡ºå’Œæ—¥è½"
        ];

        const config = {
            startDate: "2025-04-14T00:00:00", 
            loveLetter: "å®è´ï¼Œ\nä¸çŸ¥ä¸è§‰æˆ‘ä»¬å·²ç»èµ°è¿‡äº†ä¸€å¹´ã€‚\næ„Ÿè°¢ä½ åŒ…å®¹æˆ‘çš„å°è„¾æ°”ï¼Œ\næ„Ÿè°¢ä½ å¸¦æ¥çš„æ‰€æœ‰æ¸©æš–ã€‚\næœªæ¥çš„æ—¥å­å¾ˆé•¿ï¼Œ\nä½†æˆ‘åªæƒ³å’Œä½ ä¸€èµ·æ…¢æ…¢å˜è€ã€‚\nä¸€å‘¨å¹´å¿«ä¹ï¼çˆ±ä½ â¤ï¸"
        };

        function displayNextReason() {
            const display = document.getElementById('reasonDisplay');
            const randomReason = reasons[Math.floor(Math.random() * reasons.length)];
            display.style.opacity = 0;
            setTimeout(() => {
                display.innerText = randomReason;
                display.style.opacity = 1;
            }, 300);
            confetti({ particleCount: 30, spread: 50, origin: { y: 0.8 }, colors: ['#ffb6c1', '#ff69b4'] });
        }
        
        function displayNextPromise() {
            const display = document.getElementById('promiseDisplay');
            const randomPromise = futurePromises[Math.floor(Math.random() * futurePromises.length)];
            
            display.style.opacity = 0;
            
            setTimeout(() => {
                display.innerText = randomPromise;
                display.style.opacity = 1;
            }, 300);
            
            const count = 200;
            const defaults = {
                origin: { y: 0.8 },
                colors: ['#6366f1', '#a855f7', '#fbbf24'] 
            };

            function fire(particleRatio, opts) {
                confetti(Object.assign({}, defaults, opts, {
                    particleCount: Math.floor(count * particleRatio)
                }));
            }

            fire(0.25, { spread: 26, startVelocity: 55 });
            fire(0.2, { spread: 60 });
            fire(0.35, { spread: 100, decay: 0.91, scalar: 0.8 });
            fire(0.1, { spread: 120, startVelocity: 25, decay: 0.92, scalar: 1.2 });
            fire(0.1, { spread: 120, startVelocity: 45 });
        }

        function updateTimer() {
            const start = new Date(config.startDate).getTime();
            const now = new Date().getTime();
            const diff = now - start;
            if (diff < 0) { document.getElementById("days").innerText = "0"; return; }
            document.getElementById("days").innerText = Math.floor(diff / (1000 * 60 * 60 * 24));
            document.getElementById("hours").innerText = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            document.getElementById("minutes").innerText = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            document.getElementById("seconds").innerText = Math.floor((diff % (1000 * 60)) / 1000);
        }
        setInterval(updateTimer, 1000);
        updateTimer();

        const letterElem = document.getElementById("typewriter");
        let charIndex = 0;
        function typeWriter() {
            if (charIndex < config.loveLetter.length) {
                const char = config.loveLetter.charAt(charIndex);
                letterElem.innerHTML += char === '\n' ? '<br>' : char;
                charIndex++;
                setTimeout(typeWriter, 100); 
            }
        }
        const letterObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) { typeWriter(); letterObserver.disconnect(); } });
        });
        letterObserver.observe(letterElem);

        const revealElements = document.querySelectorAll('.reveal');
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('active'); });
        }, { threshold: 0.1 });
        revealElements.forEach(el => revealObserver.observe(el));

        function triggerConfetti() {
            const duration = 3000;
            const end = Date.now() + duration;
            (function frame() {
                confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#ff0000', '#ffa500', '#ffff00'] });
                confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#ff0000', '#ffa500', '#ffff00'] });
                if (Date.now() < end) { requestAnimationFrame(frame); }
            }());
        }

        function createHearts() {
            const container = document.getElementById('heartsContainer');
            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = Math.random() * 3 + 3 + 's';
                heart.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(heart);
            }
        }
        createHearts();
    </script>
</body>
</html>
